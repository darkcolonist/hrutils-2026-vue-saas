import{r as p,j as s,q as ot,d as N}from"./app-DzK1gbCK.js";import{P as nt}from"./Paper-DU_MpVWS.js";import{T as it}from"./TextField-C38XhjyE.js";import{L as j,a as rt}from"./MenuList-C_GV7b5X.js";import{_ as $,a as d,c as S,l as I,g as L}from"./createTheme-C3PDnj56.js";import{b as k,a as _,e as W,s as F,c as z}from"./styled-DmLGLTNf.js";import{u as at,b as ct}from"./createSvgIcon-DGBPCsNV.js";import{i as lt}from"./useControlled-CZPCSLIs.js";import{B as dt}from"./ButtonBase-CN_vy0sz.js";import{i as U}from"./Portal-BKL6eDyi.js";import{L as pt}from"./ListItemText-CwLD37jo.js";import{T as y}from"./Typography-B65R2bHg.js";import{D as mt}from"./Delete-SOQkke_0.js";import{I as ut}from"./IconButton-Q7EIC3YM.js";import{L as H}from"./Link-DnqJQcma.js";import"./Select-BOoN7lT6.js";import"./index-BwqtTtay.js";import"./useTheme-BadDaQPl.js";import"./Modal-CwkGqN9h.js";import"./utils-Dtlv9x_c.js";import"./inheritsLoose-B8YXPC31.js";import"./index-CvodmsZY.js";import"./TransitionGroupContext-Mvz6PzCh.js";import"./emotion-react.browser.esm-DYW1Qt72.js";import"./SvgIcon-B2duuu6b.js";import"./assertThisInitialized-B9jnkVVz.js";import"./useIsFocusVisible-Bb7ccel6.js";import"./listItemTextClasses-CudY3Ac7.js";import"./extendSxProp-CxCUejmT.js";import"./createSvgIcon-BjYjlfVC.js";function ft(t){return _("MuiListItem",t)}const x=k("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),gt=k("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function xt(t){return _("MuiListItemSecondaryAction",t)}k("MuiListItemSecondaryAction",["root","disableGutters"]);const bt=["className"],vt=t=>{const{disableGutters:e,classes:o}=t;return z({root:["root",e&&"disableGutters"]},xt,o)},yt=F("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.disableGutters&&e.disableGutters]}})(({ownerState:t})=>d({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),Y=p.forwardRef(function(e,o){const n=W({props:e,name:"MuiListItemSecondaryAction"}),{className:a}=n,i=$(n,bt),c=p.useContext(j),l=d({},n,{disableGutters:c.disableGutters}),m=vt(l);return s.jsx(yt,d({className:S(m.root,a),ownerState:l,ref:o},i))});Y.muiName="ListItemSecondaryAction";const ht=["className"],Ct=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],It=(t,e)=>{const{ownerState:o}=t;return[e.root,o.dense&&e.dense,o.alignItems==="flex-start"&&e.alignItemsFlexStart,o.divider&&e.divider,!o.disableGutters&&e.gutters,!o.disablePadding&&e.padding,o.button&&e.button,o.hasSecondaryAction&&e.secondaryAction]},jt=t=>{const{alignItems:e,button:o,classes:n,dense:a,disabled:i,disableGutters:c,disablePadding:l,divider:m,hasSecondaryAction:r,selected:b}=t;return z({root:["root",a&&"dense",!c&&"gutters",!l&&"padding",m&&"divider",i&&"disabled",o&&"button",e==="flex-start"&&"alignItemsFlexStart",r&&"secondaryAction",b&&"selected"],container:["container"]},ft,n)},St=F("div",{name:"MuiListItem",slot:"Root",overridesResolver:It})(({theme:t,ownerState:e})=>d({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&d({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${gt.root}`]:{paddingRight:48}},{[`&.${x.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${x.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:I(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${x.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:I(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${x.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:I(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:I(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),Lt=F("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Pt=p.forwardRef(function(e,o){const n=W({props:e,name:"MuiListItem"}),{alignItems:a="center",autoFocus:i=!1,button:c=!1,children:l,className:m,component:r,components:b={},componentsProps:G={},ContainerComponent:O="li",ContainerProps:{className:q}={},dense:T=!1,disabled:M=!1,disableGutters:P=!1,disablePadding:J=!1,divider:K=!1,focusVisibleClassName:Q,secondaryAction:D,selected:X=!1,slotProps:Z={},slots:tt={}}=n,et=$(n.ContainerProps,ht),st=$(n,Ct),w=p.useContext(j),A=p.useMemo(()=>({dense:T||w.dense||!1,alignItems:a,disableGutters:P}),[a,w.dense,T,P]),R=p.useRef(null);at(()=>{i&&R.current&&R.current.focus()},[i]);const g=p.Children.toArray(l),B=g.length&&lt(g[g.length-1],["ListItemSecondaryAction"]),h=d({},n,{alignItems:a,autoFocus:i,button:c,dense:A.dense,disabled:M,disableGutters:P,disablePadding:J,divider:K,hasSecondaryAction:B,selected:X}),E=jt(h),V=ct(R,o),C=tt.root||b.Root||St,v=Z.root||G.root||{},u=d({className:S(E.root,v.className,m),disabled:M},st);let f=r||"li";return c&&(u.component=r||"div",u.focusVisibleClassName=S(x.focusVisible,Q),f=dt),B?(f=!u.component&&!r?"div":f,O==="li"&&(f==="li"?f="div":u.component==="li"&&(u.component="div")),s.jsx(j.Provider,{value:A,children:s.jsxs(Lt,d({as:O,className:S(E.container,q),ref:V,ownerState:h},et,{children:[s.jsx(C,d({},v,!U(C)&&{as:f,ownerState:d({},h,v.ownerState)},u,{children:g})),g.pop()]}))})):s.jsx(j.Provider,{value:A,children:s.jsxs(C,d({},v,{as:f,ref:V},!U(C)&&{ownerState:d({},h,v.ownerState)},u,{children:[g,D&&s.jsx(Y,{children:D})]}))})}),At=()=>s.jsx(y,{color:L[500],fontStyle:"italic",children:"List is empty"}),Rt=({searchTerm:t})=>s.jsx(y,{color:L[500],fontStyle:"italic",children:`"${t}" not found`}),$t=({item:t})=>null,Nt=({data:t,height:e,ItemNotFoundPlaceholder:o=Rt,SecondaryActionPlaceholder:n=$t,ListEmptyPlaceholder:a=At})=>{const[i,c]=p.useState(""),l=t.filter(r=>r.toLowerCase().includes(i.toLowerCase())),m=e?{maxHeight:e,overflowY:"auto"}:{};return s.jsxs(nt,{sx:{p:1},children:[s.jsx(it,{label:"Search",variant:"outlined",autoComplete:"off",fullWidth:!0,value:i,onChange:r=>c(r.target.value)}),l.length===0?i?s.jsx(o,{searchTerm:i}):s.jsx(a,{}):s.jsx(rt,{style:m,children:l.map((r,b)=>s.jsx(Pt,{secondaryAction:s.jsx(n,{item:r}),children:s.jsx(pt,{primary:r})},b))})]})},kt=({suggestion:t})=>s.jsx("span",{children:t});function Ft({searchTerm:t,SuggestionWrapper:e=kt,useSuggestions:o}){const[n,a]=p.useState(t),i=o(n);return p.useEffect(()=>{const c=setTimeout(()=>{a(t)},500);return()=>clearTimeout(c)},[t]),i.length?s.jsxs("span",{children:[s.jsx("br",{}),"Suggested: ",i.map((c,l)=>{const m=l<i.length-1?", ":"",r=s.jsx(e,{suggestion:c});return s.jsxs("span",{children:[r,m]},l)})]}):null}function Gt(t){const[e,o]=p.useState([]);return p.useEffect(()=>{async function n(){const a=await axios.post(route("permissions.search",{keyword:t}));o(a.data)}n()},[t]),e}const Ot=({roleName:t,searchTerm:e})=>s.jsxs("span",{children:["Add"," ",s.jsx(Tt,{roleName:t,permissionName:e})," ","to ",t,"."," ",s.jsx(Ft,{searchTerm:e,useSuggestions:Gt,SuggestionWrapper:({suggestion:o})=>s.jsx(H,{component:N,href:route("permissions.givePermissionToRole",{permissionName:o,role:t}),method:"post",underline:"hover",children:o})})]}),Tt=({roleName:t,permissionName:e})=>s.jsx(H,{component:N,href:route("permissions.givePermissionToRole",{permissionName:e,role:t}),method:"post",underline:"hover",children:e}),Mt=({roleName:t,permissionName:e})=>s.jsx(ut,{component:N,href:route("permissions.removePermissionFromRole",{permission:e,role:t}),method:"post",size:"small",title:`remove ${e} from ${t}`,children:s.jsx(mt,{})});function ue({className:t="max-w-xl"}){const e=ot().props.role;return s.jsxs("section",{className:t,children:[s.jsxs("header",{children:[s.jsx(y,{variant:"h2",fontSize:18,children:"Permissions"}),s.jsx(y,{paragraph:!0,variant:"body2",color:L[600],children:"Add or Remove permissions from Role"})]}),s.jsx("div",{className:"mt-6 space-y-6",children:s.jsx(Nt,{height:"250px",data:e.permissions.map(o=>o.name),ItemNotFoundPlaceholder:({searchTerm:o})=>s.jsx(Ot,{roleName:e.name,searchTerm:o}),SecondaryActionPlaceholder:({item:o})=>s.jsx(Mt,{roleName:e.name,permissionName:o}),ListEmptyPlaceholder:()=>s.jsxs(y,{color:L[500],fontStyle:"italic",children:["no permissions assigned to ",e.name]})})})]})}export{ue as default,Gt as useSuggestions};
