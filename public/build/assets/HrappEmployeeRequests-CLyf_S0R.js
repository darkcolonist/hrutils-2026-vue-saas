import{j as t,R as d}from"./app-DzK1gbCK.js";import{A as D}from"./ArrayOfObjectsTable-leWHgasa.js";import{A as b}from"./AxiosWrapper-D0Xio5Ph.js";import{C}from"./JsonView-DB6OvlW2.js";import{R as h}from"./RealtimeTimestamp-CVUy6-7M.js";import{T as n}from"./Typography-B65R2bHg.js";import{S as m}from"./Stack-B9u6xylV.js";import{A as p}from"./Avatar-B86caYYU.js";import{C as z}from"./Chip-BQuyeMq3.js";import{B as l}from"./Button-Cp_uUmXX.js";import{D as A,a as S}from"./DialogContent-FO_bFTgm.js";import{D as _,a as O}from"./DialogTitle-BjIhsvYH.js";import"./String-Db2qaVrC.js";import"./Divider-CcjRHbHI.js";import"./createTheme-C3PDnj56.js";import"./styled-DmLGLTNf.js";import"./dividerClasses-C-FM_ymL.js";import"./Paper-DU_MpVWS.js";import"./Box-D6Lgme0E.js";import"./extendSxProp-CxCUejmT.js";import"./TableCell-CRwELvg7.js";import"./useTheme-BadDaQPl.js";import"./emotion-react.browser.esm-DYW1Qt72.js";/* empty css             */import"./moment-DLzRzeJX.js";import"./createSvgIcon-DGBPCsNV.js";import"./SvgIcon-B2duuu6b.js";import"./ButtonBase-CN_vy0sz.js";import"./assertThisInitialized-B9jnkVVz.js";import"./inheritsLoose-B8YXPC31.js";import"./TransitionGroupContext-Mvz6PzCh.js";import"./useIsFocusVisible-Bb7ccel6.js";import"./Modal-CwkGqN9h.js";import"./Portal-BKL6eDyi.js";import"./index-CvodmsZY.js";import"./utils-Dtlv9x_c.js";const w=e=>{let s;const a=T(e);try{s=JSON.parse(a)}catch{console.debug("Trouble parsing JSON:",a),s="N/A"}return s},T=e=>(e=e.replace(/\\/g,"\\\\"),e=e.replace(/\\"/g,'"'),e);function c({jsonData:e,dialogTitle:s="details"}){const[a,o]=d.useState(!1),r=()=>{o(!0)},i=()=>{o(!1)};return t.jsxs("div",{children:[t.jsx(l,{size:"small",variant:"outlined",onClick:r,children:"Show"}),t.jsxs(A,{open:a,onClose:i,children:[t.jsx(_,{children:s}),t.jsx(S,{children:e}),t.jsx(O,{children:t.jsx(l,{onClick:i,children:"Close"})})]})]})}const v=({formats:e,data:s})=>{const o=s.map(r=>{const{timestamp:i,request_type:x,status:u,employee:j,executor:f,json_details:g,...y}=r;return{timestamp:i,request_type:x,status:u,employee:j,executor:f,json_details:g,...y}});return t.jsx(D,{lines:o,customizations:{timestamp:{render:r=>t.jsx(h,{titleDisplayFormat:e.dates.front_end_moment_human,children:r})},status:{render:r=>r.includes("pending")?t.jsx(z,{color:"warning",label:r,size:""}):r},json_details:{render:r=>t.jsx(c,{jsonData:t.jsx(C,{src:w(r)})})},reason:{render:r=>r!==null&&r.trim().length>0?t.jsx(c,{jsonData:r}):null},executor:{render:r=>t.jsxs(m,{direction:"row",alignItems:"center",spacing:1,children:[t.jsx(p,{sx:{mt:2,height:24,width:24},src:r.avatar}),t.jsx(n,{variant:"body2",children:r.name})]})},employee:{render:r=>t.jsxs(m,{direction:"row",alignItems:"center",spacing:1,children:[t.jsx(p,{sx:{mt:2,height:24,width:24},src:r.avatar}),t.jsx(n,{variant:"body2",children:r.name})]})}}})};function ht({formats:e,...s}){return t.jsx(t.Fragment,{children:t.jsx(b,{method:"post",routeName:"dashboard.employee-requests",after:a=>t.jsxs(d.Fragment,{children:[t.jsxs(n,{paragraph:!0,children:["Data cached ",t.jsx(h,{titleDisplayFormat:e.dates.front_end_moment_human,children:a.timestamp})]}),t.jsx(v,{formats:e,data:a.requests})]})})})}export{ht as default};
