import{j as e,a as z,g as I,R as p,q as H}from"./app-DzK1gbCK.js";import{C as L}from"./CheckCircle-1U4KJx8I.js";import{C as B}from"./Cancel-CNi9z5_H.js";import{r as R,a as k}from"./createSvgIcon-BjYjlfVC.js";import{A as M}from"./AxiosWrapper-D0Xio5Ph.js";import{m as q}from"./moment-DLzRzeJX.js";import{R as G}from"./RealtimeTimestamp-CVUy6-7M.js";import{I as g}from"./IconButton-Q7EIC3YM.js";import{B as O}from"./Badge-BachXXc0.js";import{P as W}from"./Select-BOoN7lT6.js";import{B as x}from"./Box-D6Lgme0E.js";import{P as U}from"./Paper-DU_MpVWS.js";import{T as c}from"./Typography-B65R2bHg.js";import{T as J}from"./TextField-C38XhjyE.js";import{S as P}from"./Stack-B9u6xylV.js";import{D}from"./Divider-CcjRHbHI.js";import{a as Y}from"./Number-BwsWdfFc.js";import{g as K}from"./String-Db2qaVrC.js";import{G as f}from"./Grid-rlWhB2C7.js";import{A as Q}from"./Avatar-B86caYYU.js";import"./createSvgIcon-DGBPCsNV.js";import"./createTheme-C3PDnj56.js";import"./SvgIcon-B2duuu6b.js";import"./styled-DmLGLTNf.js";import"./useControlled-CZPCSLIs.js";import"./useIsFocusVisible-Bb7ccel6.js";import"./JsonView-DB6OvlW2.js";/* empty css             */import"./useTheme-BadDaQPl.js";import"./emotion-react.browser.esm-DYW1Qt72.js";import"./ButtonBase-CN_vy0sz.js";import"./assertThisInitialized-B9jnkVVz.js";import"./inheritsLoose-B8YXPC31.js";import"./TransitionGroupContext-Mvz6PzCh.js";import"./usePreviousProps-D5vB_2V6.js";import"./Portal-BKL6eDyi.js";import"./index-CvodmsZY.js";import"./index-BwqtTtay.js";import"./MenuList-C_GV7b5X.js";import"./utils-Dtlv9x_c.js";import"./Modal-CwkGqN9h.js";import"./extendSxProp-CxCUejmT.js";import"./dividerClasses-C-FM_ymL.js";const X=function(t){return e.jsx("span",{style:{opacity:.7,fontSize:".9em"},children:t.children})};var s={},C;function Z(){if(C)return s;C=1;var t=R();Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=t(k()),o=z(),n=(0,a.default)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z"}),"SpeakerNotes");return s.default=n,s}var $=Z();const ee=I($);var l={},y;function te(){if(y)return l;y=1;var t=R();Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var a=t(k()),o=z(),n=(0,a.default)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");return l.default=n,l}var oe=te();const re=I(oe),ne=({backgroundComment:t})=>{const{formats:a}=H().props;return t.timestamp&&q(t.timestamp).format(a.dates.front_end_moment_human),e.jsx(p.Fragment,{children:e.jsxs("span",{style:{marginLeft:"10px",textIndent:"-10px"},children:[e.jsx(c,{component:"span",sx:{...t.timestamp==null?{opacity:.2,fontStyle:"italic"}:{}},children:t.comment}),t.timestamp?e.jsx(G,{sx:{ml:.5,opacity:.2,fontSize:".7em"},titleDisplayFormat:a.dates.front_end_moment_human,children:t.timestamp}):null]})})},ae=({backgroundComments:t,...a})=>e.jsx(P,{divider:e.jsx(D,{}),sx:{py:.5,px:1,height:"200px",width:"300px",overflowY:"scroll",flexDirection:"column-reverse"},children:t.map((o,n)=>e.jsx(ne,{backgroundComment:o,index:n},n))});function ie({email:t,...a}){const[o,n]=p.useState(null),[d,w]=p.useState(0),[h,v]=p.useState([]),[u,j]=p.useState(""),N=r=>{n(r.currentTarget)},T=()=>{n(null)},_=r=>{if(r.preventDefault(),u.trim()==="")return;const i={index:h.length,timestamp:null,comment:u.trim()};S(i),async function(){const m=await axios.post(route("background.check.comments.submit",{email:t,comment:u})),A={...i,...m.data};E(A)}(),j("")},E=r=>{v(i=>i.map(m=>m.index===r.index?r:m))},S=r=>{v(i=>{const m=[r,...i];return w(m.length),m})},F=r=>j(r.target.value),b=!!o,V=b?"comment-history-popover":void 0;return e.jsxs(e.Fragment,{children:[e.jsxs(g,{"aria-label":"delete",size:"small",onClick:N,title:"view additional comments",children:[e.jsx(O,{badgeContent:d,color:"primary",children:e.jsx(ee,{fontSize:"inherit"})}),e.jsx(M,{method:"post",routeName:"background.check.comments",params:{email:t},after:r=>null,afterCallback:r=>{r.list.map(i=>{S(i)})}})]}),e.jsx(W,{id:V,open:b,anchorEl:o,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(x,{sx:{p:1},children:[e.jsx(x,{component:U,children:d<1?e.jsx(c,{sx:{opacity:.3,lineHeight:10},align:"center",children:"no additional comments yet"}):e.jsx(ae,{backgroundComments:h})}),e.jsx(x,{component:"form",onSubmit:_,children:e.jsx(J,{value:u??"",onChange:F,fullWidth:!0,size:"small",InputProps:{endAdornment:e.jsx(g,{"aria-label":"delete",size:"small",onClick:_,title:"send",children:e.jsx(re,{fontSize:"inherit"})})}})})]})})]})}const me=function(t){const{status:a}=t;let o;return a.toLowerCase()==="active"?o=e.jsx(L,{color:"success"}):o=e.jsx(B,{color:"error"}),o};function Xe({user:t,...a}){const o={lg:"auto",xs:150};return t.mobile_number_formatted=t.mobile_number?Y(t.mobile_number):null,t.department_initials=t.department?K(t.department):null,t.age=t.birth_date?q(t.birth_date).fromNow(!0):null,e.jsxs(f,{container:!0,spacing:1,children:[e.jsx(f,{item:!0,xs:12,lg:3,children:e.jsx(Q,{sx:{mt:2,height:o,width:o},src:t.avatarURL})}),e.jsxs(f,{item:!0,xs:12,lg:9,children:[e.jsxs(P,{direction:"row",alignItems:"center",gap:1,divider:e.jsx(D,{orientation:"vertical",flexItem:!0}),children:[e.jsx(me,{status:t.status}),e.jsxs(c,{sx:{fontSize:"1.2em"},children:[t.first_name," ",t.last_name]}),e.jsx(c,{sx:{fontSize:".6em"},children:t.id}),e.jsx(ie,{email:t.company_email})]}),[{label:"Employee Status",name:"status"},{label:"Department",name:"department_initials"},{label:"Age",name:"age"},{label:"Hired",name:"hired_date"},{label:"Email",name:"personal_email"},{label:"Mobile",name:"mobile_number_formatted"},{label:"Gross",name:"current_salary"},{label:"Title",name:"job_title"},{label:"Position",name:"position"},{label:"Employment Status",name:"employment_status"}].map((n,d)=>e.jsxs(c,{sx:{fontSize:".9em"},children:[e.jsx(X,{children:n.label})," ",t[n.name]]},d))]})]})}export{Xe as default};
