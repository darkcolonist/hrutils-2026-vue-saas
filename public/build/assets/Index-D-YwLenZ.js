import{j as t,R as s,y as h,d as j}from"./app-DzK1gbCK.js";import{A as S}from"./AuthenticatedSectionLayout-C0ang2zY.js";import C from"./UserProfileGroup-D9JN1hrn.js";import{S as b,g as y,a as I}from"./Suggestions-D5ahUr6s.js";import{I as B}from"./Attendance-DHT0SggK.js";import{C as k}from"./CustomDialog-DqlvYqbB.js";import{B as v}from"./Badge-BachXXc0.js";import{I as D}from"./IconButton-Q7EIC3YM.js";import{C as R}from"./CheckCircle-1U4KJx8I.js";import{C as T}from"./Cancel-CNi9z5_H.js";import{B as g}from"./Box-D6Lgme0E.js";import{A}from"./Alert-DWe2lBf8.js";import{T as x}from"./Typography-B65R2bHg.js";import{T as w}from"./TextField-C38XhjyE.js";import{S as d}from"./Stack-B9u6xylV.js";import{B as V}from"./Button-Cp_uUmXX.js";import{A as F}from"./Avatar-B86caYYU.js";import{D as L}from"./Divider-CcjRHbHI.js";import"./AuthenticatedLayout-C9BrKX1h.js";import"./transition-DX8SEIrv.js";import"./ApplicationLogo--mtiArjz.js";import"./BaseIcon-DwiLtAUa.js";import"./SvgIcon-B2duuu6b.js";import"./createTheme-C3PDnj56.js";import"./styled-DmLGLTNf.js";import"./Permission-B9FnPw0U.js";import"./DialogContent-FO_bFTgm.js";import"./useTheme-BadDaQPl.js";import"./Paper-DU_MpVWS.js";import"./Modal-CwkGqN9h.js";import"./createSvgIcon-DGBPCsNV.js";import"./Portal-BKL6eDyi.js";import"./index-CvodmsZY.js";import"./utils-Dtlv9x_c.js";import"./inheritsLoose-B8YXPC31.js";import"./TransitionGroupContext-Mvz6PzCh.js";import"./Autocomplete-BDCsttB-.js";import"./Select-BOoN7lT6.js";import"./useControlled-CZPCSLIs.js";import"./index-BwqtTtay.js";import"./MenuList-C_GV7b5X.js";import"./emotion-react.browser.esm-DYW1Qt72.js";import"./Close-BimXVjFC.js";import"./Popper-BLoNF7VC.js";import"./createPopper-D0FOOgzE.js";import"./usePreviousProps-D5vB_2V6.js";import"./Chip-BQuyeMq3.js";import"./ButtonBase-CN_vy0sz.js";import"./assertThisInitialized-B9jnkVVz.js";import"./useIsFocusVisible-Bb7ccel6.js";import"./JsonView-DB6OvlW2.js";/* empty css             */import"./UserProfile-BTLzI6i_.js";import"./createSvgIcon-BjYjlfVC.js";import"./AxiosWrapper-D0Xio5Ph.js";import"./moment-DLzRzeJX.js";import"./RealtimeTimestamp-CVUy6-7M.js";import"./Number-BwsWdfFc.js";import"./String-Db2qaVrC.js";import"./Grid-rlWhB2C7.js";import"./extendSxProp-CxCUejmT.js";import"./Loans-CMdXGpEM.js";import"./ArrayOfObjectsTable-leWHgasa.js";import"./TableCell-CRwELvg7.js";import"./Payrolls-B2totafP.js";import"./LoanStatistics-snoSf2jO.js";import"./KeyValueGrid-CvVJ_wf8.js";import"./Link-DnqJQcma.js";import"./DialogTitle-BjIhsvYH.js";import"./dividerClasses-C-FM_ymL.js";function E({isVisible:o=!0,size:n="small",count:r=0,children:i,...m}){return t.jsx(s.Fragment,{children:o?t.jsx(k,{buttonLabel:t.jsx(v,{badgeContent:r,color:"info",children:t.jsx(D,{size:n,children:t.jsx(B,{})})}),dialogContent:i}):null})}function U(o,n=500){let r;return(...i)=>{r&&clearTimeout(r),r=setTimeout(()=>{o(...i)},n)}}const z=o=>o==null?!1:typeof o=="string"||o instanceof String?o.trim().length>2:!0,G=async o=>(await axios.post(route("background.find"),{keyword:o})).data,H=({users:o,...n})=>{const r=({user:i,...m})=>t.jsxs(V,{href:y(i),component:j,sx:{justifyContent:"flex-start",textTransform:"inherit"},children:[t.jsx(F,{src:i.avatarURL,sx:{width:32,height:32,mr:1}}),t.jsxs(d,{divider:t.jsx(L,{}),children:[t.jsxs("span",{children:[i.status==="active"?t.jsx(R,{color:"success",sx:{width:12,height:12,mr:.5}}):t.jsx(T,{color:"disabled",sx:{width:12,height:12,mr:.5}}),t.jsx(x,{variant:"span",fontSize:18,children:I(i)})]}),t.jsx("span",{children:i.department})]})]});return t.jsx(s.Fragment,{children:t.jsx(d,{spacing:.3,sx:{maxHeight:200},children:o.map((i,m)=>t.jsx(r,{user:i},m))})})},N=({searchString:o="",...n})=>{const[r,i]=s.useState("none yet"),[m,p]=s.useState(!1),[l,c]=s.useState(0),a=s.useCallback(U(async u=>{if(u===null)return;p(!1);const e=await G(u);e.users.length&&(c(e.users.length),i(t.jsx(H,{users:e.users})),p(!0))}),[]);return s.useEffect(()=>{z(o)?a(o):a(null)},[o]),t.jsx(E,{count:l,isVisible:m,children:r})};function io({auth:o,keyword:n,response:r,formats:i}){const[m,p]=s.useState(n),[l,c]=s.useState(null),a=s.useRef(null);s.useEffect(()=>{a.current&&a.current.focus()},[]);function u(e){e.preventDefault(),m!==n&&h.visit(route("background.check",{keyword:m}))}return t.jsx(S,{auth:o,title:"Background Check",children:t.jsxs(g,{sx:{p:2},children:[r.errors&&r.errors.length?t.jsx(A,{severity:"error",children:r.errors.map((e,f)=>t.jsx(x,{variant:"body2",children:e},f))}):null,t.jsxs(g,{sx:{my:1,display:"flex",alignItems:"center"},component:"form",onSubmit:u,children:[t.jsx(w,{placeholder:"Search",autoComplete:"off",defaultValue:m,onChange:e=>{p(e.target.value),c(e.target.value)},inputRef:a}),t.jsx(N,{searchString:l})]}),t.jsx(g,{sx:{my:1},children:t.jsx(b,{formats:i})}),r.results&&r.results.users?t.jsx(d,{spacing:1,children:r.results.users.map((e,f)=>t.jsx(C,{user:e},f))}):null]})})}export{io as default};
